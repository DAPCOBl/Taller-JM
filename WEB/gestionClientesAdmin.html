<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Taller JM</title>
    <link rel="shortcut icon" href="CSS/IMG/LOGO.png" type="image/x-icon">
    <link rel="stylesheet" href="CSS\style.css">
    <link rel="stylesheet" href="CSS/horarioAdmin.css">
</head>
<body>
    <header class="hero">
        <nav class="nav container">
            <div class="nav__logo">
                <h2 class="nav__title">JM - Admin</h2>
            </div>
            <ul class="nav__link nav__link--menu">
                <li class="nav__items">
                  <h5><a href="indexADMIN.html" class="nav__links">Inicio</a></h5></a>
                </li>
            </ul>

            <div class="nav__menu">
                <img src=".IMG/LOGO.png" class="nav__img">
            </div>
        </nav>

        <section class="hero__container container">
            <h1 class="hero__title">Taller JM</h1>
            <p class="hero__paragraph"style = color:white;font-size:22px;>Empresa especializada en las motocicletas, tanto la parte de mantenimiento y reparación, como el área de venta de repuestos y accesorios</p>
        </section>
    </header>
  <section class="Plan__Gestion">
    <section class="plan_container">
      <h1 class="subtitle">Gestión de archivos</h1>

      <div class="plan__table exp">
          <div class="plan__element plan__element--best">
              <h3 class="plan__plan">Exportar</h3>
              <div class="plan__items">
                  <input type="text" id="texto-archivo" placeholder="Ingrese su csv" />
                  <button id="exportar">Exportar</button>
              </div>
          </div>             
      </div>
      <div class="plan__table">
          <div class="plan__element">
              <h3 class="plan__plan">Importar</h3>
              <div class="plan__items">
                  <input type="file" id="archivo2" />
              </div>
          </div> 
      </div>

      
      
      <article class="tabla">
        <div id="textDate" style="display: none;">
          <h1 class="subtitle">DATOS CARGADOS</h1>
        </div>
          <div class="csv">
          <div id="tablares"></div>
          </div>
      </article>

      <script>
        function buscarJefe() {          
        // Obtener el valor del texto ingresado en el campo de entrada
        const textoIngresado = document.getElementById('inputBus').value;
        
        // Texto de comparación definido en el código JavaScript
        const textoComparacion = 'Paula';
        
        // Comparar los dos textos
        if (textoIngresado === textoComparacion) {
          document.querySelectorAll('.NoPaula').forEach(function(elemento) {
                elemento.style.display = "none ";
              });
          alert("Jefe de bodega encontrado en la BD");
          
        } else {
          alert("Jefe de bodega NO encontrado en la BD");
          document.querySelectorAll('.NoPaula').forEach(function(elemento) {
                elemento.style.display = "";
              });
        }
      }
      </script>

      <style>

        .busq{
          padding-right: 30px;
          width: 30px;
          padding: 10px;
          margin-top: 15px;
          height: 35px;

          border-color: black;
          border: 2px;
        }

        .buscar-codigo{
            display: flex;
            margin: 10px 0 20px;
            text-align: center;
            align-items: center;
            justify-content: center;
        }

        .buscar-codigo h4{
            margin-right: 50px;
        }

        .buscar-codigo input{
            padding-right: 30px;
            width: 500px;
            padding: 10px;
            margin-top: 10px;
            height: 35px;
        }
      </style>
      <h1 class="subtitle">JEFE DE BODEGA</h1>
      <div class="buscar-codigo">
        <h4>Jefe Bodega</h4>
        <input class="inputBus" id="inputBus" placeholder="Ingresa la cedula o nombre del jefe de bodega">
        <div class="busq" onclick="buscarJefe()">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
          <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
        </div>
      </div>
      <div>
        <table class="table1">
          <tr id="header">
            <th>Cambiar estado</th>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Cedula</th>
              <th>Sede</th>
              <th>Estado</th>
              <th>Opcion</th>
          </tr>          
              <tr class="NoPaula">
                <td><input type="checkbox" id="checkbox1"></td>
                <td>Lucia</td>
                <td>Suarez</td>
                <td>69432681</td>
                <td><select>
                    <option value="USME46"selected>USME CLL 46</option>
                    <option value="USME30">USME KR 30</option>
                    <option value="BOGOTA">BOGOTA 1 MAYO</option>
                  </select></td>
                <td>Inactivo</td>
                <td>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash3" onclick = "deleteJefe(this)" viewBox="0 0 16 16">
                    <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                  </svg>
                </td>
              </tr>
            
            <tr>
              <td><input type="checkbox" id="checkbox2" checked></td>
              <td>Paula</td>
              <td>Herrera</td>
              <td>109352079</td>
              <td>
                <select>
                  <option value="USME46">USME CLL 46</option>
                  <option value="USME30" selected>USME KR 30</option>
                  <option value="BOGOTA">BOGOTA 1 MAYO</option>
                </select>
              </td>
              <td>Activo</td>
              <td>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash3" onclick = "deleteJefe(this)" viewBox="0 0 16 16">
                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                </svg>
              </td>
            </tr>
            
            <tr class="NoPaula">
              <td><input type="checkbox" id="checkbox3" checked></td>
              <td>Sara</td>
              <td>Martínez</td>
              <td>143298234</td>
              <td>
                <select>
                  <option value="USME46">USME CLL 46</option>
                  <option value="USME30">USME KR 30</option>
                  <option value="BOGOTA" selected>BOGOTA 1 MAYO</option>
                </select>
              </td>
              <td>Activo</td>
              <td>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash3" onclick = "deleteJefe(this)" viewBox="0 0 16 16">
                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                </svg>
              </td>
            </tr>
          </table>
      </div>
      
        <script>  
          const checkboxes = document.querySelectorAll('input[type="checkbox"]');

          checkboxes.forEach(function(checkbox) {
            checkbox.addEventListener('change', function() {
              const estadoElement = this.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling;
              if (this.checked) {
                estadoElement.textContent = 'Activo';
              } else {
                estadoElement.textContent = 'Inactivo';
              }
            });
          });
                
          function deleteJefe(element) {
            element.parentNode.parentNode.style.display = "none";
          }

        </script>

        <div id="GUARDAR" style="text-align: left;">
        <button type="submit" formaction="login.html" title="GUARDAR" name="Guardar" onclick="mostrarAlertaGuardado()">Guardar</button>
      </div>
      
      <script>
      function mostrarAlertaGuardado() {
        alert("Jefes actualizados.");
      }
      </script>
      

  </section>
    <footer class="Plan__Foo">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>TÉRMINOS Y CONDICIONES DEL SERVICIO</h3>
            <ul>
              <li><i class="fas fa-phone"></i> Contrato Usuario 2023</li>
              <li><i class="fas fa-envelope"></i> Contrato Usuario 2022</li>
              <li><i class="fas fa-map-marker-alt"></i> Contrato Débito Automático 2023</li>
              <li><i class="fas fa-map-marker-alt"></i> Contrato Débito Automático 2022</li>
              <li><i class="fas fa-map-marker-alt"></i> Politica de privacidad</li>
            </ul>
          </div>
          <div class="footer-section">
            <h3>CONTACTO</h3>
            <ul>
              <li><i class="fas fa-phone"></i> 3208162801</li>
              <li><i class="fas fa-envelope"></i> Taller JM@servicio.com</li>
              <li><i class="fas fa-map-marker-alt"></i> Colombia</li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2023 Todos los derechos reservados | Taller JM | By: Cristian</p>
        </div>
      </div>
    </footer>

  <script>
    /**
    * Exportar
    **/
    function exportar (data, fileName) {
      const a = document.createElement("a");
      const contenido = data,
          blob = new Blob([contenido], {type: "octet/stream"}),
          url = window.URL.createObjectURL(blob);
      a.href = url;
      a.download = fileName;
      a.click();
      window.URL.revokeObjectURL(url);
      
    };

    document.querySelector('#exportar').onclick = function () {
      const data = document.querySelector('#texto-archivo').value;
      const nombreArchivo = 'ejemplo.txt'
      exportar(data, nombreArchivo);
    }

    /**
    * Importar y operar con .csv
    **/
    function crearTabla(data) {
      const todasFilas = data.split(/\r?\n|\r/);
      let tabla = '<table>';
      for (let fila = 0; fila < todasFilas.length; fila++) {
        if (fila === 0) {
          tabla += '<thead>';
          tabla += '<tr>';
        } else {
          tabla += '<tr>';
        }
        const celdasFila = todasFilas[fila].split(',');
        for (let rowCell = 0; rowCell < celdasFila.length; rowCell++) {
          if (fila === 0) {
            tabla += '<th>';
            tabla += celdasFila[rowCell];
            tabla += '</th>';
          } else {
            tabla += '<td>';
            tabla += celdasFila[rowCell];
            tabla += '</td>';
          }
        }
        if (fila === 0) {
          tabla += '</tr>';
          tabla += '</thead>';
          tabla += '<tbody>';
        } else {
          tabla += '</tr>';
        }
      } 
      tabla += '</tbody>';
      tabla += '</table>';
      document.querySelector('#tablares').innerHTML = tabla;
      alert("Cargandos csv");
      

     document.getElementById("textDate").style.display = "block";

    }

    function leerArchivo2(evt) {
        let file = evt.target.files[0];
        let reader = new FileReader();
        
        if (file) {
          reader.onload = (e) => {
            // Cuando el archivo se terminó de cargar
            crearTabla(e.target.result);
          };
          // Leemos el contenido del archivo seleccionado
          reader.readAsText(file);
        }
      }
    document.querySelector('#archivo2')
      .addEventListener('change', leerArchivo2, false);


    /**
     * Leer y mostrar contenido inmediatamente
    **/  
    function mostrarContenido(contenido) {
        const elemento = document.getElementById('contenido-archivo');
        elemento.innerHTML = contenido;
      }
    function leerArchivo(e) {
      const archivo = e.target.files[0];
      if (!archivo) {
        return " ";
      }
      const lector = new FileReader();
      lector.onload = function(e) {
        const contenido = e.target.result;
        mostrarContenido(contenido);
      };
      lector.readAsText(archivo);
    }

    document.querySelector('#archivo1')
      .addEventListener('change', leerArchivo, false);
  </script>
</body>
</html>